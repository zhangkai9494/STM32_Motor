# STM32_Motor
作品提交库
==========

<br>更新日志<br>

2019年7月31日23:10:40 版本号：v0.0
-----------------------------------
<br>`已知BUG：`<br>
>角度是减小的<br>
>偶尔速度会和设定值误差较大<br>
>设定角度未实现<br>
>按键14按下不管用<br>

`下一步：`<br>
>通过按键切换控制模式<br>
>设定角度可以旋转<br>

2019年8月1日15:14:52 版本号：v0.1
-----------------------------------
<br>`修复BUG：`<br>
>角度问题解决<br>

`已知BUG：`<br>
>按键有时候失灵<br>
>按键14仍然不管用<br>

`添加：`<br>
>加入模式转换功能<br>
>EEPROM开辟三个内存块用来储存新的PID参数<br>

2019年8月2日13:02:35 版本号：v0.2
-----------------------------------
<br>`已知BUG：`<br>
>串口指令接收有问题<br>
>按键14仍然不管用<br>

`更改：`<br>
>将串口菜单放入usart.c中执行<br>

2019年8月10日22:03:28 版本号：v1.0
-----------------------------------
<br>`已知BUG：`<br>
>前几位显示正常 调节系数的后两位显示不正常为 0.00099和0.00009<br>

`更改：`<br>
>将UI.c中的sprintf函数删除，改用自己编写的 float_to_char函数 <br>
>将串口菜单放入主函数执行<br>

`动态：`<br>
>github版本控制开始使用 <br>

`下一步：`<br>
>完善代码注释（标准化）<br>
>float_to_char的修改 <br>
>控制转过角度实现 <br>
>通过串口接收指令<br>

2019年8月11日14:08:52 版本号：v1.1
-----------------------------------
<br>`修复BUG:`<br>
>float_to_char函数没有问题 错误未知<br>

2019年8月12日11:42:38 版本号：v1.2
-----------------------------------
<br>`修复BUG：` <br>
>数字判定有问题 加入新指令解决 <br>

`已知BUG：`<br>
>调节系数后两位仍然显示不正常<br>

`添加：`<br>
>串口指令部分完成<br>

2019年8月13日11:04:54 版本号：v1.3
-----------------------------------
<br>`修改：`<br>
>优化程序结构<br>
>增加添加代码注释<br>
>调整速度PID参数为 P0.46499 I0.00010 D0.42610 角度PID参数为 P1.34309 I0.00000 D0.63900  <br>

`已知BUG：`<br>
>按键最后一排经常失灵<br>
>调节系数后两位仍然显示不正常<br>
>调整系数有时候加减操作不正常<br>
>转过角度无法一次性到位，并且误差较大<br>

2019年8月14日16:46:18 版本号：v1.4
-----------------------------------
<br>`修复BUG：`<br>
>在串口中发送设定PID参数只对速度PID生效，现在可以根据模式自己选择储存地址了<br>

`添加：`<br>
>串口指令“setmode 0/1”，现在可以在串口中控制电机运行模式了<br>

`已知BUG：`<br>
>按键最后一排经常失灵<br>
>调节系数后两位仍然显示不正常<br>
>调整系数有时候加减操作不正常<br>
>转过角度无法一次性到位，并且误差较大<br>
>setangle指令无法识别大于等于100的角度，<br>

2019年8月15日15:40:15 版本号：v1.5
-----------------------------------
<br>`修改：`<br>
>main.c中大段代码移入function.c中作为独立功能函数，缩短了main函数的长度，现在代码变得更容易阅读了<br>
>修改了一些注释<br>

2019年8月15日21:03:29 版本号：v1.6
-----------------------------------
<br>`修复BUG:`<br>
>修复timer.c中定时器中关于不同模式下PID调整选择的代码<br>
>修复设定的角度没有上传给单片机的BUG <br>

`修改：`<br>
>调整了角度PID参数 <br>
>在UI界面上添加角度设定指示线<br>

2019年8月18日12:10:25 版本号：v1.7
-----------------------------------
<br>`修复BUG：`<br>
>修复串口发送角度在参数-h下数据出错的BUG<br>
>修复调节系数后三位由浮点数有效位数导致的数据异常的BUG<br>

<br>`已知BUG：`<br>
>转过角度无法一次性到位，经常性停滞，并且误差较大<br>
>按键最后一排输入异常<br>

2019年8月20日12:33:09 版本号：v1.8
-----------------------------------
<br>`硬件更新：`<br>
>更换按键硬件为PCB板印矩阵按键，板子接地后按键一切正常，包括14号按键<br>

`修改：`<br>
>UI界面中速度关于时间的函数图像增加一条线，线宽更粗了<br>

`已知BUG：`<br>
>转过角度无法一次性到位，经常性停滞，并且误差较大<br>

2019年8月23日20:01:44：版本号：v1.9
-----------------------------------
<br>`修改：`<br>
>优化了串口发送回的界面，现在看起来更美观了<br>

`添加：`<br>
>创建的电机控制板PCB文件和外壳3D打印文件，在文档-附件中<br>

2019年8月26日16:04:40：版本号：v2.0
-----------------------------------
<br>`修改：`<br>
>修改了部分注释，格式化部分代码<br>
>格式化Git README.MD文件<br>
